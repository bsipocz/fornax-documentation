fornax-platform.
================

## What is the NASA Astrophysics Science Platform?

Increased compute, increased reproducibility, increased inclusion, software installs done for users

* What does it do? (Basic Capabilities)
* Who is it for?
* Limits: What does it not do?
  * How much compute do I get?
  * [Limits](https://heasarc.gsfc.nasa.gov/docs/sciserver/#limits) on diskspace, lifetime of containers etc.
  * [Download](https://heasarc.gsfc.nasa.gov/docs/sciserver/#limits) restrictions to prevent egress charges

## Getting started
* How do I get an account?
* How to Log in?
 * Log in at  https://daskhub.fornaxdev.mysmce.com/
* How to log out?
 *  go to `File` Menu: `hub control panel` and `stop my server`.  This insures the server is not still running when you logout which would be a waste of resources
 *  then logout in the upper right
* How to choose which server to open upon login
 * This depends on which type of science you want to do.  THe   
* How to choose which size server to open upon login?
  * Make sure to use `mini` size for writing/debugging/testing before switching to larger sizes
  * On demand:  starts when the user asks for it (e.g., start your Fornax server), runs as long as you continue to use and pay for it.
  * Spot:  starts when you ask for it, might be given back to AWS at any time, and is thus cheap.  (What happens to user’s session when this happens in the middle of it?)
  * 128 core: do not use unless given permission
* Navigating jupyter lab
  * How do I start a new notebook?
   * The blue `+` in the upper left brings you to the launcher where you can start a new notebook or open a terminal window
  * How do I get a terminal window?
   * The blue `+` in the upper left brings you to the launcher where you can start a new notebook or open a terminal window
  * How to upload data into the platform?
   * The uparrow in the upper left allows you to upload data
  *  How to download data from the plaltform to my local machine?
   * If it is a small file, you can right click on the file name in the file browser and scroll to `Download`
* [Home Directory](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
  * Do those files persist between sessions?
  * Who can see my home directory?
* [Opening & Creating Files](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
* [Uploading, Downloading, and Caching Files](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
  * [Moving files in and out](https://heasarc.gsfc.nasa.gov/docs/sciserver/#moving-files)
* How to share files from inside the SP with collaborators
  * Download them to favorite storage place (university box account) or put in cloud (put $$ in your proposals to cover this)
* [Announcements](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-Announcements) for space limits or cost limits - (Does the SMCE have this???)
* Terminal commands to show in the SP what computing resources are available to me?
* How do I save my notebook as a python script?
* Test a notebook
* Save your work! - SP will cull after a user is inactive for a certain amount of time
* Running a notebook non-interactively
* Open a plot generated by a notebook (png, pdf, etc.)?
  * Do we need to download these or will they open in jupyter lab?
* Will notebooks that I run on the SP also work on my laptop?
* Do I need to worry about costs when working in the SP?
* How do I know what my usage is?

## Data Access
* How do I add my own data?
 * small files can be added with the upload button, which is an `uparrow` in the upper right
 * large file transfers??
* Where should I store my data in the SP? 
* How to access data in the cloud?
  * [STScI](https://github.com/spacetelescope/tike_content/blob/main/content/notebooks/data-access/data-access.ipynb) tutorial
  * Can I see that directly in the terminal?
* Use astroquery or pyvo etc.,- links to various tutorials here
  * [Data discovery with HEASARC tools](https://heasarc.gsfc.nasa.gov/docs/sciserver/#data-discovery)

## Managing Software
* Making a conda environment that persists across sessions([JupyterLab Kernels](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-JupyterLabKernels))
* [Pre-installed Software](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-Pre-installedSoftwareandTemporaryAdditions): can I get a list of what is already there?
* How do I install my own software?
  * [Persistent User-Installed Software](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-PersistentUser-InstalledSoftware)
  * Non-persistent User-Installed Software 
    * you can !pip install your favorite software from inside a notebook.  This installed software will stay through kernel restarts, but will not be persistent if you stop your server and restart it (logging out and back in). 
  * [From a Notebook cell:](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-FromaNotebookcell:)
  * [From a terminal window:](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-Fromaterminalwindow:)
* Terminal command to list package version info using pip
* Can I launch apps from icons? Like MOPEX or SPICE
* Can I run licensed software (IDL) in the SP?
* Can I bring my own docker image?

## Examples and Tutorials
* Cloud ([STScI](https://github.com/spacetelescope/tike_content/blob/main/content/notebooks/data-access/data-access.ipynb))
* [Parquet](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/aws-open-data-catalogs/wise-allwise-catalog-demo.ipynb)
* Image cutouts
* Optimizing code for fast processing
  * By looking inside the code for slow pieces (CPU profiling)
  * By looking inside the code for memory troubles (memory profiling)
  * By parallelization
    * Python built in [multiprocessing](https://github.com/IPAC-SW/ipac-sp-notebooks/tree/main/parallelize)
    * Daskhub gateway
* [MAST](https://github.com/spacetelescope/tike_content/blob/main/markdown/science-examples.md)
* HEASARC [sciserver_cookbooks](https://github.com/HEASARC/sciserver_cookbooks/blob/main/Introduction.md)
* [Cross matching two large catalogs](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/gaia_cross_SEIP/gaia_cross_SEIP.ipynb)
* [Work with theoretical catalogs](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* Fully worked science use cases
  * [Forced photometry](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
  * [Light curves](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* User contributions: open issue or PR on Github (which Github repo?)

## Troubleshooting
* If users internet connection goes away - what happens to the running notebook?
* Restart kernel
* Restart SP - will solve version issues if packages with different versions were loaded since these won’t persist across SP restarts
* [Known Issues](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* helpdesk

## Getting Help
* We need to setup a helpdesk!!


## Additional Resources
* New to Python? -
  * [numpy tutorials](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
  * [Scipy lecture notes](https://scipy-lectures.org/)
  * [Data science handbook](https://jakevdp.github.io/PythonDataScienceHandbook/)
* [Guide to documenting python functions](https://developer.lsst.io/python/numpydoc.html#numpydoc-sections-in-docstrings)
* [Github](https://docs.github.com/en/get-started/quickstart)
* [Debugging](https://jakevdp.github.io/PythonDataScienceHandbook/01.06-errors-and-debugging.html#Debugging:-When-Reading-Tracebacks-Is-Not-Enough)
* Each Archive’s homepage
* Jupyterlab
* Jupyter notebooks
